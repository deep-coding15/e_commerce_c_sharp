@page
@model E_commerce_c_charp.Pages_Admin_Product.CreateModel

@{
    Layout = "_LayoutAdmin";
    ViewData["Title"] = "Create";
}

<h1>Create</h1>

<h4>Product</h4>
<hr />


<div class="modal fade" id="addProductModal" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content border-0 shadow-3xl" style="border-radius: 20px; background: linear-gradient(145deg, #f8fafc 0%, #e2e8f0 100%); overflow: hidden; position: relative;">
            
            <!-- Header avec motif marocain -->
            <div class="modal-header border-0 pb-4 pt-4 px-5" style="background: linear-gradient(90deg, #1e293b 0%, #334155 50%, #475569 100%); color: white; position: relative; overflow: hidden;">
                <!-- Motif décoratif -->
                <div class="position-absolute top-0 start-0 w-100 h-100 opacity-10" style="background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0icGF0dGVybi1tYXJvYyIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIj48cGF0aCBkPSJNMCwwIEw1MCwwIEw1MCw1MCBMMzUsMzUgTDAsNTAgWiIgZmlsbD0iI2ZmZiIgZmlsbC1vcGFjaXR5PSIwLjIiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjcGF0dGVybi1tYXJvYykiLz48L3N2Zz4=');"></div>
                
                <h5 class="modal-title fw-bold fs-4 position-relative z-2" style="color: #fbbf24;">
                    <i class="bi bi-plus-circle-fill me-3 position-relative" style="font-size: 1.8rem; color: #fbbf24; text-shadow: 0 0 10px rgba(251,191,36,0.5);"></i>
                    <span style="font-family: 'Traditional Arabic', serif;">إضافة منتج جديد</span>
                    <br><small style="font-size: 0.9rem;">Ajouter un nouveau produit</small>
                </h5>
                <button type="button" class="btn-close btn-close-white z-2" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <form id="addProductForm" method="post" asp-page-handler="CreateProduct" novalidate>
                <div class="modal-body p-5 px-lg-5">
                    <!-- Fond décoratif subtil -->
                    <div class="position-absolute top-0 end-0 opacity-5 z-1" style="font-size: 8rem;">
                        <i class="bi bi-flower3"></i>
                    </div>

                    <div class="row g-4">
                        <!-- Nom produit -->
                        <div class="col-12">
                            <label for="productName" class="form-label fw-bold mb-2" style="color: #1e293b; font-family: 'Traditional Arabic', serif;">
                                <i class="bi bi-tag-fill me-2" style="color: #059669;"></i>
                                اسم المنتج <span class="text-danger">*</span>
                                <small class="d-block text-muted fw-normal mt-1">(Nom du produit)</small>
                            </label>
                            <input type="text" class="form-control form-control-lg shadow-sm border-0 rounded-4 px-4 py-3" 
                                   id="productName" name="Product.Name" 
                                   placeholder="مثال: قميص بريميوم إيكووير | Ex: T-Shirt Premium EcoweAR" 
                                   style="background: linear-gradient(145deg, #ffffff 0%, #f1f5f9 100%); border: 2px solid #e2e8f0; transition: all 0.3s;" 
                                   required />
                            <div class="invalid-feedback">Nom du produit obligatoire (max 100 caractères)</div>
                        </div>

                        <!-- Description -->
                        <div class="col-12">
                            <label for="productDescription" class="form-label fw-bold mb-2" style="color: #1e293b;">
                                <i class="bi bi-card-text me-2" style="color: #7c3aed;"></i>
                                وصف المنتج <span class="text-danger">*</span>
                                <small class="d-block text-muted fw-normal mt-1">(Description)</small>
                            </label>
                            <textarea class="form-control shadow-sm border-0 rounded-4 px-4 py-3" id="productDescription" 
                                      name="Product.Description" rows="4" 
                                      placeholder="وصف مفصل للمنتج مع المميزات والمواد المستخدمة... | Décrivez votre produit en détail..." 
                                      style="background: linear-gradient(145deg, #ffffff 0%, #f1f5f9 100%); border: 2px solid #e2e8f0; font-family: inherit; resize: vertical;" 
                                      required></textarea>
                            <div class="invalid-feedback">Description obligatoire</div>
                        </div>

                        <!-- Prix et Stock -->
                        <div class="col-xl-6 col-lg-6 col-md-12">
                            <label for="productPrice" class="form-label fw-bold mb-2" style="color: #1e293b;">
                                <i class="bi bi-currency-euro me-2" style="color: #059669;"></i>
                                السعر <span class="text-danger">*</span>
                                <small class="d-block text-muted fw-normal mt-1">(Prix €)</small>
                            </label>
                            <div class="input-group">
                                <span class="input-group-text bg-success-subtle border-success text-success rounded-start-4 fs-6">
                                    <i class="bi bi-currency-euro"></i>
                                </span>
                                <input type="number" step="0.01" min="0.01" class="form-control form-control-lg shadow-sm border-0 rounded-end-4 px-4 py-3" 
                                       id="productPrice" name="Product.Price" placeholder="47.50" 
                                       style="background: linear-gradient(145deg, #f0fdf4 0%, #dcfce7 100%); border-left: none;" 
                                       required />
                            </div>
                            <div class="invalid-feedback">Prix valide requis (€)</div>
                        </div>

                        <div class="col-xl-6 col-lg-6 col-md-12">
                            <label for="productStock" class="form-label fw-bold mb-2" style="color: #1e293b;">
                                <i class="bi bi-box-seam me-2" style="color: #dc2626;"></i>
                                المخزون <span class="text-danger">*</span>
                                <small class="d-block text-muted fw-normal mt-1">(Stock)</small>
                            </label>
                            <div class="input-group">
                                <span class="input-group-text bg-danger-subtle border-danger text-danger rounded-start-4 fs-6">
                                    <i class="bi bi-archive"></i>
                                </span>
                                <input type="number" min="0" class="form-control form-control-lg shadow-sm border-0 rounded-end-4 px-4 py-3" 
                                       id="productStock" name="Product.StockQuantity" placeholder="150" 
                                       style="background: linear-gradient(145deg, #fef2f2 0%, #fce7e8 100%); border-left: none;" 
                                       required />
                            </div>
                            <div class="invalid-feedback">Stock valide (0 ou plus)</div>
                        </div>

                        <!-- Catégorie + Marque -->
                        <div class="col-xl-6 col-lg-6">
                            <label for="productCategory" class="form-label fw-bold mb-2" style="color: #1e293b;">
                                <i class="bi bi-grid-3x3-gap me-2" style="color: #8b5cf6;"></i>
                                الفئة <span class="text-danger">*</span>
                                <small class="d-block text-muted fw-normal mt-1">(Catégorie)</small>
                            </label>
                            <select class="form-select form-select-lg shadow-sm border-0 rounded-4 px-4 py-3" id="productCategory" 
                                    name="Product.CategoryId" style="background: linear-gradient(145deg, #faf5ff 0%, #f3e8ff 100%); border: 2px solid #e9d5ff;" required>
                                <option value="">اختر فئة | Choisir...</option>
                                @foreach (var cat in Model.Categories)
                                {
                                    <option value="@cat.Id">@cat.Name</option>
                                }
                            </select>
                            <div class="invalid-feedback">Catégorie requise</div>
                        </div>

                        <!-- Featured -->
                        <div class="col-12">
                            <div class="card border-0 shadow-sm rounded-4 p-4" style="background: linear-gradient(145deg, #fefce8 0%, #fef9c3 100%); border: 2px solid #fef08a;">
                                <div class="form-check form-switch form-switch-lg">
                                    <input class="form-check-input" type="checkbox" id="featuredProduct" name="Product.IsFeatured" style="transform: scale(1.3);">
                                    <label class="form-check-label fw-bold fs-5 lh-sm" for="featuredProduct" style="color: #92400e;">
                                        <i class="bi bi-star-fill me-2 text-warning" style="font-size: 1.5rem; animation: pulse 2s infinite;"></i>
                                        عرض على الصفحة الرئيسية | Mettre en vente sur page d'accueil
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="modal-footer border-top border-light border-2 p-4 px-lg-5 bg-gradient" style="background: linear-gradient(90deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%);">
                    <button type="button" class="btn btn-outline-secondary btn-lg px-5 py-3 rounded-pill shadow-lg border-2" data-bs-dismiss="modal" style="border-color: #d97706 !important;">
                        <i class="bi bi-x-lg me-2"></i>
                        <strong>إلغاء | Annuler</strong>
                    </button>
                    <button type="submit" class="btn btn-success btn-lg px-6 py-3 rounded-pill shadow-lg border-0 position-relative overflow-hidden" style="background: linear-gradient(45deg, #16a34a 0%, #22c55e 100%);">
                        <i class="bi bi-check-circle-fill me-3"></i>
                        <strong>حفظ | Enregistrer</strong>
                        <div class="position-absolute top-0 end-0 w-100 h-100 bg-success opacity-0 scale-150" style="transition: all 0.3s;"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
@* @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
} *@

.hover-lift {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}
.hover-lift:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25) !important;
}

.form-control:focus, .form-select:focus {
    border-color: #fbbf24 !important;
    box-shadow: 0 0 0 0.25rem rgba(251,191,36,0.25) !important;
    background: rgba(255,255,255,0.95) !important;
}

.invalid-feedback {
    display: block !important;
    font-size: 0.875rem;
}
</style>

@section Scripts {
    <script>
        // Animations loading
        document.getElementById('addProductForm').addEventListener('submit', function() {
            const btn = this.querySelector('button[type="submit"]');
            const icon = btn.querySelector('i');
            icon.className = 'bi bi-hourglass-split me-3 animate__animated animate__spin';
            btn.innerHTML = '<i class="bi bi-hourglass-split me-3 animate__animated animate__spin"></i><strong>Enregistrement...</strong>';
        });

        // Preview realtime
        document.getElementById('productName').addEventListener('input', function() {
            this.style.background = this.value ? 'linear-gradient(145deg, #ecfdf5 0%, #d1fae5 100%)' : '';
        });
    </script>
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}

<div>
    <a asp-page="Index">Back to List</a>
</div>

@* @section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }pp
} *@