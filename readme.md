**Pages folder :**
    contains Razor pages and supporting files.
**Each Razor page is a pair of files :**
    - A .cshtml file that has HTML markup with C# code using Razor syntax.
    - A .cshtml.cs file that has c# code that handles page events.

**wwwroot folder :** 
    contains static assets, like HTML files JavaScript files and CSS files.

**appsettings.json :**
    contains configuration data, like connection strings.

**Entity Framework Core (EF Core) :**
    Is an objet/relational mapper (O/RM) that simplifies data access.
    You write the model classes first, and EF Core creates the database.

**Model classes are known as POCO classes (Plain-Old CLR Objects) :**
    Because they don't have a dependency on EF Core. 
    They define the properties of the data that are stored in the database.

**Comment le projet a été généré :**
    1.Prereequisites :
        - Visual Studio Code
        - C# Dev Kit for Visual Studio Code
        - .NET 9 SDK
    2.Creer le projet (Razor Pages Web app) :
        - dotnet new webapp -o E-commerce_c_charp
        - code -r E-commerce_c_charp
    3.Run the app :
        - dotnet dev-certs https --trust : 
            trust the HTTPS development certificate 
    4.Add NuGet packages and EF tools :
        - dotnet tool uninstall --global dotnet-aspnet-codegenerator
        - dotnet tool install --global dotnet-aspnet-codegenerator
        - dotnet tool uninstall --global dotnet-ef
        - dotnet tool install --global dotnet-ef
        - dotnet add package Microsoft.EntityFrameworkCore.Design --version 9.0.0
        - dotnet add package Microsoft.EntityFrameworkCore.SQLite --version 9.0.0
        - dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design --version 9.0.0  --Needed for scaffolding
        - dotnet add package Microsoft.EntityFrameworkCore.SqlServer --version 9.0.0           --Needed for scaffolding
        - dotnet add package Microsoft.EntityFrameworkCore.Tools --version 9.0.0
        - dotnet add package Microsoft.EntityFrameworkCore --version 9.0.0

        - dotnet restore

# scaffold the models :
    - dotnet aspnet-codegenerator razorpage --model Product --dataContext E_commerce_c_charp.Data.E_commerce_c_charpContext --useDefaultLayout --relativeFolderPath Pages/Product --referenceScriptLibraries --databaseProvider sqlserver
     
    - dotnet aspnet-codegenerator razorpage --model Order --dataContext E_commerce_c_charp.Data.E_commerce_c_charpContext --useDefaultLayout --relativeFolderPath Pages/Order --referenceScriptLibraries --databaseProvider sqlserver
 
    - dotnet aspnet-codegenerator razorpage --model Category --dataContext E_commerce_c_charp.Data.E_commerce_c_charpContext --useDefaultLayout --relativeFolderPath Pages/Category --referenceScriptLibraries --databaseProvider sqlserver
     
    - dotnet aspnet-codegenerator razorpage --model OrderItem --dataContext E_commerce_c_charp.Data.E_commerce_c_charpContext --useDefaultLayout --relativeFolderPath Pages/OrderItem --referenceScriptLibraries --databaseProvider sqlserver

# Create the initial database schema using EF's migration feature :
EF Core est responsable de la création et de la mise à jour de la structure (le schéma) de la base de données (SQL Server, SQLite, etc.) pour qu'elle corresponde à ces classes.
    The migrations feature in EF Core provides a way to : 
    - Create the initial database schema
    - Incrementally update the database schema to keep it in sync with the app's data model. Existing data in the database is preserved.
    **dotnet ef migrations add InitialCreate :**
        - elle analyse les classes C#
        - Compare avec la dernière migration
        - Génère un fichier de migration qui contient le SQL nécessaire pour créer les tables.
    **dotnet ef database update :** 
        * permet d'appliquer les changements de schéma de base de données en attente, basés sur les migrations C# que vous avez générées précédemment, à votre base de données cible.
        - Synchronisation du modèle et de la base de données
        - Elle effectue les operations suivantes : 
            * Parcourt toutes les classes de migrations générés avec dotnet ef migrations add [nomMigration] qui n'ont pas encore été appliquées à la base de données.
            * Connexion à la Base de Données
            * Exécute les scripts SQL : Pour chaque migration non appliquée, EF Core ecévute le code SQL correspondant.
            * Mise à jour du Suivi : mets a jour une table spéciale __EFMigrationsHistory qui suit quelles sont les migrations déjà appliquées et guarantissent qu'une migration n'est jamais exécutée deux fois.

# Scaffolded Razor Pages in ASP.NET Core:
Go deep into file generated by Scaffolded:
    For Create, Delete, Details and Edit pages
        *In the .cshtml.cs file*
            - The constructor uses *dependency injection* to add the **E_commerce_c_charpContext** to the page
            - OnGetAsync() : For GET requests it returns a list of movies to the Razor Page.
            - When *OnGet* returns *void* or *OnGetAsync* returns *Task*, no return statement is used.
            - When the return type is *IActionResult* or *Task<IActionResult>*, a return statement must be provided. exple: return Page();
        *In the .cshtml file* 
            Razor can transition from HTML into C# or into Razor-specific markup. When an @ symbol is follow by Razor reserved keyword, it transitions into Razor-specific markup, ortherwise it transitions into C#.
            - @page Razor directive : It makes the file an MVC action, which means that it can handle requests. @page must be the first Razor directive on a page. 
            - @model directive : It specifies the type of the model passed to the Razor Page. The model is used in the *@Html.DisplayNameFor()* and *@Html.DisplayFor()* HTML Helpers on the page. *Ex: @Html.DisplayNameFor(model => model.Movie[0].Title)*
            - *ViewData and layout* : 
              - ViewData In the Pages/Shared/_Layout.cshtml file @{ ViewData["Title"] = "Index"; }
              - Layout in the Pages/_ViewStart.cshtml file @{ Layout = "_Layout"; } The preceding markup sets the layout file to Pages/Shared/_Layout.cshtml for all Razor files under the Pages folder. 
        *In the Layout Page* 
            Each page shows the same menu layout where is implemented in the *Pages/Shared/_Layout.cshtml file*. Layout templates allow the HTML container layout to be :
                - Specified in one place.
                - Applied in multiple pages in the site.
                - The @RenderBody() is a placeholder where all the page-specific views show up, wrapped in the layout page.
        *The Create page model*
            - The Validation Tag Helpers (<div asp-validation-summary ...>and <span asp-validation-for ...>) display validation errors. 
            - The Label Tag Helper (<label asp-for="Movie.Title" class="control-label"></label>) generates the label caption and [for] attribute for the Title property.
            - The Input Tag Helper (<input asp-for="Movie.Title" class="form-control">) uses the DataAnnotations attributes and produces HTML attributes needed for jQuery Validation on the client-side.
# Work with a Database 





# References : 
    1. Tutoriel guidé partie 4 : https://learn.microsoft.com/en-us/aspnet/core/tutorials/razor-pages/sql?view=aspnetcore-9.0&tabs=visual-studio
    2. Razor Pages architecture and concepts in ASP.NET Core : https://learn.microsoft.com/en-us/aspnet/core/razor-pages/?view=aspnetcore-9.0&tabs=visual-studio#layout
    3. Dependency injection in ASP.NET Core : https://learn.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-9.0
    4. Razor Pages with Entity Framework Core in ASP.NET Core - Tutorial 1 of 8 : https://learn.microsoft.com/en-us/aspnet/core/data/ef-rp/intro?view=aspnetcore-9.0&tabs=visual-studio#asynchronous-code
    5. Razor syntax reference for ASP.NET Core : https://learn.microsoft.com/en-us/aspnet/core/mvc/views/razor?view=aspnetcore-9.0#razor-reserved-keywords

        